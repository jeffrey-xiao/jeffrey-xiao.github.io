{"componentChunkName":"component---src-templates-blog-js","path":"/blog/tags/rust","result":{"data":{"pagePosts":{"edges":[{"node":{"html":"<h2 id=\"introduction\"><a href=\"#introduction\" aria-label=\"introduction permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Introduction</h2>\n<p>Over the past month, I tried my hand at emulating the Nintendo Entertainment System and I wanted to\nshare my personal experience creating <code class=\"language-text\">neso-rs</code> and some advice to those wanting to make their own.\nMy final goal was to compile the project to WebAssembly so that the emulator can be run on the web,\nso I will also share my thoughts on the WebAssembly ecosystem.</p>\n<p>Links to the source code:</p>\n<ul>\n<li><a href=\"https://github.com/jeffrey-xiao/neso-web\">Web frontend</a></li>\n<li><a href=\"https://github.com/jeffrey-xiao/neso-gui\">SDL2 frontend</a></li>\n<li><a href=\"https://github.com/jeffrey-xiao/neso-rs\">Core NES crate</a></li>\n</ul>\n<h2 id=\"cpu\"><a href=\"#cpu\" aria-label=\"cpu permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU</h2>\n<p>Implementing the CPU is definitely the first task to complete when building an NES emulator from\nscratch. The CPU is a MOS 6502 CPU with the BCD mode stripped off. For me, the CPU was the easiest,\nbut least interesting component of the NES. The MOS 6502 is well documented and even a transistor\nlevel emulator even exists, so it was fairly easy to implement the addressing modes, and the\ninstructions. I mainly used <a href=\"http://www.obelisk.me.uk/6502/reference.html\">Obelisk's 6502 Reference</a>\nfor most of my implementation. There are some quirks to the CPU (timing when indexing crosses a page\nboundary, <code class=\"language-text\">JMP</code> bug), but these are also all well documented. I did not make a subcycle accurate\nCPU, but there are a variety of ways to do so: generating a finite state machine, using co-routines,\nor using a queue of tasks that each take one cycle.</p>\n<h2 id=\"cartridge-and-nrom\"><a href=\"#cartridge-and-nrom\" aria-label=\"cartridge and nrom permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cartridge and NROM</h2>\n<p>To actually get started on testing, it was necessary to implement Mapper 0 (NROM) and logic for\nparsing cartridges. Overall, mapper 0 and handling iNES cartridges were straightforward, and I did\nnot have much trouble in this step. After I had the same logs as Nintendulator for <code class=\"language-text\">nestest</code>, I\nmoved on to the next component.</p>\n<h2 id=\"ppu\"><a href=\"#ppu\" aria-label=\"ppu permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PPU</h2>\n<p>The PPU is a big step in difficulty from the CPU for a beginner in emulator development like me. It\ntook several days to understand how the different components of the PPU worked together. I found\nthis series of <a href=\"http://www.dustmop.io/blog/2015/04/28/nes-graphics-part-1/\">articles</a> to be\n<em>extremely</em> useful to get started on the PPU. Here are the general steps I took to get a decently\nworking PPU:</p>\n<ol>\n<li>Implement memory mapping and PPU registers.</li>\n<li>Render pattern tables at the end of each frame.</li>\n<li>Render nametables at the end of each frame.</li>\n<li>Implement the background rendering pipeline.</li>\n<li>Implement the sprite evaluation and fetching pipeline.</li>\n</ol>\n<h2 id=\"mappers\"><a href=\"#mappers\" aria-label=\"mappers permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mappers</h2>\n<p>After the PPU, I decided to put off learning about the APU to instead implement more mappers. With\nthe exception of MMC2 and MMC5, the most complicated logic components for popular mappers are\nPRG/CHR ROM banking and generating interrupts, which are not too bad to implement. I have not gotten\naround to implementing MMC2 because I didn't have a great way of snooping PPU reads, and MMC5\nbecause of its complexity.</p>\n<h2 id=\"apu\"><a href=\"#apu\" aria-label=\"apu permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>APU</h2>\n<p>I initially thought the APU would be more difficult to reason with than the PPU because I had no\nexperience with audio programming. After all, outputting a signal that you can hear <em>seemed</em>\nsignificantly harder than putting pixels on a screen. Sure NESDEV had great documentation on the\ndifferent sound channels (Pulse, Triangle, Noise, and DMC), but I didn't know where to get started.\nI had to gather a couple of observations before I fully understood how to produce sounds:</p>\n<ol>\n<li>Seeing the <a href=\"https://www.youtube.com/watch?v=OfrEoEQpPrI\">oscilloscope view</a> of the chiptune music\nwas useful to see what sounds each channel produced.</li>\n<li>The APU outputs at a frequency of ~1.78 mHz, but most PC sound cards operate at 44.1 kHz or 48\nkHz, so downsampling is required. In other words, if you wanted to downsample to 44.1 kHz, you\nwould record the output of the APU every 1.78 mHz / 44.1 kHz = ~40 cycles. Additionally, every\nframe you would have a buffer of 44.1 kHz / 60 Hz = 735 samples since the NES ran at 60 frames\nper second.</li>\n<li>After the analog audio signals of the channel outputs were combined, the combined signal goes\nthrough a first order high-pass filter at 90 Hz, another first order high-pass filter at 440 Hz,\nand finally a first order low-pass filter at 14 kHz. A high-pass filter attenuates all\nfrequencies lower than the specified frequency, while a low-pass filter attenuates frequencies\nhigher than the specified frequency. These first order filters can be realized using a simple RC\ncircuit and their algorithmic implementations can be found on their respective\n<a href=\"https://en.wikipedia.org/wiki/High-pass_filter\">Wikipedia</a>\n<a href=\"https://en.wikipedia.org/wiki/Low-pass_filter\">pages</a>. I assume these filters are needed to\nreduce <a href=\"https://en.wikipedia.org/wiki/Aliasing\">aliasing</a>.</li>\n</ol>\n<p>After combining these observations, the rest of the process was not complicated. Using the\ninformation on NESDEV, I was able to implement the different channels and was able to play sounds\nusing <code class=\"language-text\">AudioQueue</code> in <code class=\"language-text\">sdl2</code>, or <code class=\"language-text\">BufferSourceNode</code> in <code class=\"language-text\">WebAudio</code>.</p>\n<h2 id=\"compiling-to-webassembly\"><a href=\"#compiling-to-webassembly\" aria-label=\"compiling to webassembly permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Compiling to WebAssembly</h2>\n<p>With no exaggeration, compiling the project to WebAssembly was the easiest step because of how great\nthe documentation and toolchain are. The <a href=\"https://rustwasm.github.io/book/\">Rust Webassembly book</a>\nwas easy to follow and gave great advice for optimizing and profiling your code.\n<a href=\"https://github.com/rustwasm/wasm-pack\">wasm-pack</a> was also a really convenient tool for building,\npackaging and publishing your WebAssembly package. I also wanted to support an SDL2 frontend, so\nmaking <code class=\"language-text\">neso-rs</code> a general purpose crate was ideal. Luckily, with conditional compilation, you can\nhave different dependencies and features depending on the target architecture.</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-rust line-numbers\"><code class=\"language-rust\"><span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">.</span><span class=\"token lifetime-annotation symbol\">'cfg(not(target_arch</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"wasm32\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token lifetime-annotation symbol\">'.dependencies]</span>\nbincode <span class=\"token operator\">=</span> <span class=\"token string\">\"1.0\"</span>\nlog <span class=\"token operator\">=</span> <span class=\"token string\">\"0.4\"</span>\nserde <span class=\"token operator\">=</span> <span class=\"token string\">\"1.0\"</span>\nserde_derive <span class=\"token operator\">=</span> <span class=\"token string\">\"1.0\"</span>\n\n<span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">.</span><span class=\"token lifetime-annotation symbol\">'cfg(target_arch</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"wasm32\"</span><span class=\"token punctuation\">)</span><span class=\"token lifetime-annotation symbol\">'.dependencies]</span>\nconsole_error_panic_hook <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> version <span class=\"token operator\">=</span> <span class=\"token string\">\"0.1.1\"</span><span class=\"token punctuation\">,</span> optional <span class=\"token operator\">=</span> <span class=\"token keyword\">true</span> <span class=\"token punctuation\">}</span>\nwasm<span class=\"token operator\">-</span>bindgen <span class=\"token operator\">=</span> <span class=\"token string\">\"0.2\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><em><center>Snippet in <code class=\"language-text\">Cargo.toml</code> for conditional dependencies.</center></em></p>\n<p>In particular, to keep the WebAssembly bundle size down, it might be worth it to exclude expensive\n\"nice-to-have\" features like save states.</p>\n<h2 id=\"recipe-for-success\"><a href=\"#recipe-for-success\" aria-label=\"recipe for success permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recipe for Success</h2>\n<h3 id=\"1-have-patience\"><a href=\"#1-have-patience\" aria-label=\"1 have patience permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Have Patience</h3>\n<p>Making an NES emulator was significantly different from most of my previous projects. It is safe to\nsay that I have never been as frustrated with a side project as I was when tackling the PPU. For my\nprevious side projects, I felt that I made steady progress every time I worked on them, but with the\nPPU, there were countless times when I felt that I've hit a wall and could not progress. You could\nhave a mostly working implementation with a couple small bugs that make the game unrecognizable.</p>\n<p>\n  <figure class=\"gatsby-resp-image-figure\" style=\"\">\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 300px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 93.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAC4jAAAuIwF4pT92AAACNklEQVQ4y12TWbOiQAyF+///JV+cebEsl3LDfdwFFBBBdkHng1wp66a0K0knJzmnVQVR9HzmaZpx+v7D8/wgCN37/Y7nP/jEScLHsh3XvROGYRTHif/AQlUUr/f7XRRFnudJHONHURSG4ev1CgKa/TiOialN05SQqyRJCOlXZ93Ismw2m3met1wuL5eLZVkMXiwWz+cT33Ecwu12yy2OaZqGYZzPZ07V/PMXa7VaQBJPJpNut0tps9mkebfbbTYbHCC4ov9wOGiaRgEZBbfhcDgYDFiY+fRMp1M2b7fbgM7nc4azVKfTGY1GtN1uN4bju66r8qJIk+R0OtEMGbCpABVEiCEE5Jm8Wq32+z0FAEGNAqRSaZbRZts2SOPxGHkghgpkOFmBBgpQi5nsDBxJJv/bbMrJNMCHZrBhjoOqsIUYeRwmi1RkaOZpjsejpk0Vz8sm1bt6TKC51+ut1+sgCEj2+32GgAUitBuNBv2UMc8wTJVlpZKAvT9GyJLiUwoEDsw5UZ4XwSFZqh1FMZ3QY1RWGSF7wpCBkuEK5kzjigWBlr34kejX6xUBoYRjVYZDs/DkirB25FckvjJMkwXQ1qmMC3zrY+Jzyp52ZYLPV+m6QQhM3SPzZci1MkIWkaRUUsutQjQQPym7nvZrC9auC9zKyrV1w6ghAUNMaZMkRSxcayH/CrljrfJfharCqu75qaiEwf9mJIKJXwoGHxHM/phUSE899ls/CUvB6rVreb6rf2W+n/M/yL4aNpCyDpoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Donkey Kong Rendering Attempt\"\n        title=\"My first attempt at rendering the title screen of Donkey Kong in grayscale.\"\n        src=\"/static/53682b117d3622ef7b0dc12f0a17e2ac/135ae/donkey-kong-rendering-attempt.png\"\n        srcset=\"/static/53682b117d3622ef7b0dc12f0a17e2ac/19bd1/donkey-kong-rendering-attempt.png 163w,\n/static/53682b117d3622ef7b0dc12f0a17e2ac/135ae/donkey-kong-rendering-attempt.png 300w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n      />\n    </span>\n  </span>\n  \n  <figcaption class=\"gatsby-resp-image-figcaption\">My first attempt at rendering the title screen of Donkey Kong in grayscale.</figcaption>\n  </figure>\n      </p>\n<p>Many of these bugs are subtle and could require hours of debugging and digging into. The majority of\nmy time spent on the PPU was tracing the rendering pipeline to squash bugs. In particular, I spent\nan embarrassing amount of time fixing an issue with my PPU when I started to test with Super Mario\nBros.</p>\n<p>\n  <figure class=\"gatsby-resp-image-figure\" style=\"\">\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 300px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 99.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAC4jAAAuIwF4pT92AAADLklEQVQ4y4WT208TQRTG5w/BVzWoRPRBCTcviYkPPorxAWmh3RvbbYqiYFEu3d3ZbanKRRSCeAsKSEkMUaMxoiItFLEV44vGGG/xsS1iy+7OMs5CrCgRkl8mZ8433zln2lnAKQsM1B2STskWNNRZxaAVRALGiq3Mcp5sOdVayZYEnJoBTlmvbUd3HqPro6g7hE60m7SkCfCH54IptCKHhNoH0K0HqOsOOtWJGGgFg4+QK2hWSQiQMp7zqHMQdQyiziF0tmeR8801+j8F+nFdJ6KgebzNkK+ixm7EKGSLAjdQ603Tcy7tCSbA0mDIKVuQPiR2SKatRatoztiaMvYWzSmbxEPJlsSq5JjJKum3H1KJVAqwMENKEljF0ijZPNmeeRFLTM4mom8SY9GkK/CThubyGQL5OVyBhd7R1MBYAjj8OCsQc6XPVK7Ovf1CmH/zef79t6TSlyBJIv3xQ9PeQtCAz/uMVsyVfjK8Q0xTctopWdDQyKpZOD9BBzfLy5zK4lLKyM7PWOWyoP+gA0ZM/l9eG2JWSSuDtdquHs9Yx0xDjdyZguRV/XuUVtfrXOOf98jJmtZ0tarTKzQWGoKYXtOsgdGyvPEjm0KHNjTUjTkCmIUamdap4uPw612xmV3DDE3gc/XK7itNzEV340fK+s/J/fVKGTc1vYtX5wtKklLwqsvrjIyd516CqiC2B3HVeUz7STFj6Q1o1ZcnajouXatlBXlh6RX8bVY1WsJ02z3AyylO1OlGjfaZ5PPkFN0pzTc/yS+6D8r76nkJs2qagwusJWm/STMSPnFxClQomOr43jZbVtP/sFzG9gCyq9j7/HDRE3Cs+5oNYlvAsPnxSuwBk5zke1+Cgfq2R8Gj8bs5T3uKB0+KQ3W+27W+B10Hb3TlhMSqUH3r8Fk1dFocPi2FzijDDcqIVx7xikPe4EhzLZjmd8SZ7eO2wmlq1wybO8PkRhwbo0xB3LE7zu2Is5tjgrW+4rbEq7fG+LzXXG6MzY3x26LsTjAuHIgKRWN8YcRdPMGXEJ7ShWHP3jBfEHHvifDFYc+BSbK6Sifd+8Lu/VOu0ghfEnbvGxf2/wLUvOhoioJSSAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Super Mario Bros Rendering Bug\"\n        title=\"Super Mario Bros Rendering Bug\"\n        src=\"/static/ac29b91c2d840a4c83b774bed6b81479/135ae/super-mario-bros-rendering-bug.png\"\n        srcset=\"/static/ac29b91c2d840a4c83b774bed6b81479/19bd1/super-mario-bros-rendering-bug.png 163w,\n/static/ac29b91c2d840a4c83b774bed6b81479/135ae/super-mario-bros-rendering-bug.png 300w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n      />\n    </span>\n  </span>\n  \n  <figcaption class=\"gatsby-resp-image-figcaption\">Super Mario Bros Rendering Bug</figcaption>\n  </figure>\n      </p>\n<p>As you can see, the very last line of the status bar is shifted to the left. I first compared the\nCPU logs between my emulator and <a href=\"https://www.qmtpro.com/~nes/nintendulator/\">Nintendulator</a> to see\nif perhaps I was doing incorrect writes to any PPU register, in particular the <code class=\"language-text\">PPUSCROLL</code> and\n<code class=\"language-text\">PPUADDR</code> registers. Nothing seemed suspicious enough to warrant further investigation. I noticed\nthat when I moved Mario, this line would shift as well, which led me to believe that my scrolling\nlogic was wrong. When I logged the coarse X scroll values at the start of each scanline, I noticed\nthat the first 30 scanlines had a different value than the later scanlines. Note that scanline 30\nwas precisely the last line of the status bar. I was making a write to <code class=\"language-text\">PPUSCROLL</code> in the middle of\nscanline 30, which caused the rest of the scanline to shift leftwards. Interesting... If I were to\nmake that write in the middle of scanline 31, the status bar and the background would render\ncorrectly. At this point, I was convinced that I had a timing issue and by comparing the\nNintendulor's logs, there was approximately 400 PPU clocks between when I wrote to <code class=\"language-text\">PPUSCROLL</code> and\nwhen Nintendulator did.</p>\n<p>After a bit more debugging, I finally found the root cause of the issue. To fully understand what\nwas happening, it is important to grasp <em>how</em> Super Mario Bros was able to scroll the background,\nbut keep the status bar in the same place. This effect is done through changing the scroll\nmid-frame. The status bar scanlines always started with a X scroll value of 0, while the background\nscanlines were affected by the position of Mario. This can simply be done by writing to <code class=\"language-text\">PPUSCROLL</code>\nafter the status bar scanlines were rendered. The way the game knew when the status bar scanlines\nwere rendered was through the\n<a href=\"https://wiki.nesdev.com/w/index.php?title=Sprite-0_hit\">sprite-0 hit</a>. The bottom of the coin was\nactually a sprite, and then when the last status bar scanline was rendered, it would cause a\nsprite-0 hit, signalling to the CPU that it was time to render the background. Now the reason why\nthe last scanline of the status bar was shifted was because I was drawing the sprites one pixel too\nhigh! Duh? Obviously, right? By drawing the coin sprite one pixel too high, the sprite-0 hit was\nbeing triggered one scanline earlier, which caused the scroll value to change one scanline too\nearly!</p>\n<p>These were the steps I had to take to resolve just <em>one</em> bug from the countless that I encountered.\nMaking an emulator definitely requires an exorbitant amount of patience to slowly pick apart the\nsystem and debug these kind of issues. But, I believe that going through this ordeal is how you best\nlearn about a low level system like the NES.</p>\n<h3 id=\"2-write-automated-tests\"><a href=\"#2-write-automated-tests\" aria-label=\"2 write automated tests permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Write Automated Tests</h3>\n<p>It's clear that debugging small bugs takes a large portion of your development time and probably\nleads to a lot of hair pulling and frustration. What can we do to mitigate this? Write automated\ntests! The kind folks at the <a href=\"https://forums.nesdev.com/\">NESDEV forums</a> have written various test\nROMs for all parts of the NES. A comprehensive list can be found\n<a href=\"https://wiki.nesdev.com/w/index.php/Emulator_tests\">here</a>.</p>\n<p>As soon as I had a reasonably functioning CPU, I started working on integrating these test ROMs to\nprevent regressions from happening and to squash bugs early in the development process. The majority\nof my tests fall under one of two categories: text tests, and graphical tests.</p>\n<p>Most of blargg's test ROMs output the status of the test to <code class=\"language-text\">$6000</code> and the output of the test to\n<code class=\"language-text\">$6004</code>, so it suffices to see if you passed the test if <code class=\"language-text\">Passed</code> exists as a substring at <code class=\"language-text\">$6004</code>\nwhen the test finishes.</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-rust line-numbers\"><code class=\"language-rust\"><span class=\"token comment\">// Run until test status is running by polling $6000.</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> addr <span class=\"token operator\">=</span> <span class=\"token number\">0x6000</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> byte <span class=\"token operator\">=</span> nes<span class=\"token punctuation\">.</span>cpu<span class=\"token punctuation\">.</span><span class=\"token function\">read_byte</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">while</span> byte <span class=\"token operator\">!=</span> <span class=\"token number\">0x80</span> <span class=\"token punctuation\">{</span>\n    nes<span class=\"token punctuation\">.</span><span class=\"token function\">step_frame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    byte <span class=\"token operator\">=</span> nes<span class=\"token punctuation\">.</span>cpu<span class=\"token punctuation\">.</span><span class=\"token function\">read_byte</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Run until test status is finished by polling $6000.</span>\nbyte <span class=\"token operator\">=</span> nes<span class=\"token punctuation\">.</span>cpu<span class=\"token punctuation\">.</span><span class=\"token function\">read_byte</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">while</span> byte <span class=\"token operator\">==</span> <span class=\"token number\">0x80</span> <span class=\"token punctuation\">{</span>\n    nes<span class=\"token punctuation\">.</span><span class=\"token function\">step_frame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    byte <span class=\"token operator\">=</span> nes<span class=\"token punctuation\">.</span>cpu<span class=\"token punctuation\">.</span><span class=\"token function\">read_byte</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Read output at $6004.</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> output <span class=\"token operator\">=</span> Vec<span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\naddr <span class=\"token operator\">=</span> <span class=\"token number\">0x6004</span><span class=\"token punctuation\">;</span>\nbyte <span class=\"token operator\">=</span> nes<span class=\"token punctuation\">.</span>cpu<span class=\"token punctuation\">.</span><span class=\"token function\">read_byte</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">while</span> byte <span class=\"token operator\">!=</span> <span class=\"token char string\">'\\0'</span> <span class=\"token keyword\">as</span> u8 <span class=\"token punctuation\">{</span>\n    output<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>byte<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    addr <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    byte <span class=\"token operator\">=</span> nes<span class=\"token punctuation\">.</span>cpu<span class=\"token punctuation\">.</span><span class=\"token function\">read_byte</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">assert!</span><span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">::</span><span class=\"token function\">from_utf8_lossy</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>output<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Passed\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><em><center>Code for text tests.</center></em></p>\n<p>As soon as you have a functional PPU, you can also start writing graphical tests. As the name\nimplies, graphical tests output the result of the test to the screen, making it a bit more\ncomplicated than text tests. The way I approached these tests was to figure out the number of frames\nto run the test before the output was displayed, and then to compute the hash of the screen after it\nhad finished. Then, I could integrate the number of frames and the hash into a simple function that\nran for the specified number of frames and compared the hashes.</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-rust line-numbers\"><code class=\"language-rust\"><span class=\"token keyword\">for</span> _ <span class=\"token keyword\">in</span> <span class=\"token number\">0</span><span class=\"token punctuation\">..</span>$frames <span class=\"token punctuation\">{</span>\n    nes<span class=\"token punctuation\">.</span><span class=\"token function\">step_frame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> hasher <span class=\"token operator\">=</span> DefaultHasher<span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">for</span> val <span class=\"token keyword\">in</span> nes<span class=\"token punctuation\">.</span>ppu<span class=\"token punctuation\">.</span>buffer<span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    hasher<span class=\"token punctuation\">.</span><span class=\"token function\">write_u8</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">assert_eq!</span><span class=\"token punctuation\">(</span>hasher<span class=\"token punctuation\">.</span><span class=\"token function\">finish</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> $hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><em><center>Code for graphical tests.</center></em></p>\n<p>More sophisticated automated tests can be written with actual games. If you poll for controller\ninput at the beginning of each frame, it is feasible to play through an actual game and record when\ncertain buttons are pressed and released. By feeding this record of button presses and releases back\ninto the emulator, you can deterministically replay games and see if the output at each frame has\nchanged or not. Similar logic can be seen in FCEUX's movie file format,\n<a href=\"http://www.fceux.com/web/FM2.html\">FM2</a>.</p>\n<h3 id=\"3-implement-debugging-infrastructure\"><a href=\"#3-implement-debugging-infrastructure\" aria-label=\"3 implement debugging infrastructure permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Implement Debugging Infrastructure</h3>\n<p>Another way to help track down nasty bugs is to develop debugging infrastructure for your emulator.\nFor the CPU, a disassembler that prints the program counter, the opcode, the addressing mode, the\ncurrent cycle the CPU is on, the CPU registers, the addressing mode, and the relevant operand can\nassist in verifying if your CPU implementation is correct. In fact, one of the best early tests for\nyour CPU is to do a line-by-line comparison with the execution log of Nintendulator. A caveat for\nthe disassembler is that if you are printing out the relevant operand of the opcode, you must be\ncareful not to affect the state of any component. Reads to some memory locations can actually change\nthe state of a component. For example, reading <code class=\"language-text\">PPUSTATUS</code> will clear the flag that indicates if a v\nblank has started. Every memory read function should have a complementary memory peek function to\navoid any mutations in state.</p>\n<p>For the PPU, implementing debug views for the palette, nametables, and pattern tables was extremely\nuseful for me. I was able to fix issues related to mirroring and scrolling by examining the contents\nof the nametables, and figure out if I was doing CHR ROM banking correctly by checking if the\nexpected sprite and background data showed up in the pattern tables.</p>\n<p>\n  <figure class=\"gatsby-resp-image-figure\" style=\"\">\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 650px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 71.9298245614035%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAC4jAAAuIwF4pT92AAADYUlEQVQozwFWA6n8AFpUU0dIR1IqH2c0JVAdEkQZDkkvJkBBQRgYGB8fH3NwboZYU2J0f7Kwr5GVlYtmXaNSSI+Uk55vZoZybgCilZKIiIZWWlx/gICSOitdXF1LZW6ppqekpKOnqKmal5aCXmBWeJCTiYRyaWOafnCKZGJPepWqgnQ3U28AfoyNXWpqjY6NjoWEt1Q/Q2x8Kll9r6WmpaGgrq2skYiCnYB6eXR0kXxvoJSMpJeRmYODe4iYo5SIZHaLAEdjhylPdq+vroeAgLFSPElofytRfrOvr6apqpydn08+NT4qHj8lGEMyKDsnHTEgFjUsIjglGTEgFj0sIABHbX8sW26trKuIgYC1UTxCXm0wXXqjoqNsSDyBUkBCQ0NTLig6NzdKS00+RUg8IyBOFxJKPDk+JCBLMSwASGOPEzdofX9+jIWFk0k5lZKkdH+XPDQvgHFpoYl8i4SAg1xbYHyPu7i2jouJlXNmpmFYg5Scsn5wdG9yAH6PmWR6hZuWk3h2doZsY7GajGBWS3t0b6+wsJSYmo+OjY1qbFl0ioV0an1xaaOMgIdqa056l6SKfjZWdgCDVDmCVDt8UDZrQCdzRixtOh5eNR+IWT91SzN+Ujl6a2SJdG52Y1qHdW2PgnuCeXKDeXR2d3qCeG5ob3YAa2xsTU5OT05OSEhHc3NzcnNzZGRkR0dHWFlZZWNjOicYKRkFQSENRSIQPCQYYjgoWCkbRCYZVCwaYjEhAKCgoLa2tra2tpybm7Ozs5CPj5qZmainp72+v8XDvFM4VhwQWVAiSmIXHWsjGlU7HzhEFScyJj4oIkUiGQChoaGlpaWtra2/v7+enp6fn5+FhYVubm50dXe+t652nNUJSvyZJ+DnElHfRANxiQABrgoFkGACFh4AAAAAf39/dXV1ioqKdnZ2mZmZwsLCmpqaj4+PjY6PvLWzw+/7faz83pf//Yuq/7dy5NtKl/JyU//eXYqWFwkEALKxspuamtLS0q2trKysq7CwsL29vcfHx8XFxaGhont5csykjnRDNLGInMdhX0o/bzuYhBVXKc+NkbNCLQDh4+fh4+fc3+Lo6+6doKO0t7rU1tnMztLU1tjDyc+RgXDZs49wV1Wmls1/cIZ7eXJ8oMNHSU7Oc22Tb4AmxYCxegMIVgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Castlevania Debug Views\"\n        title=\"Castlevania Debug Views\"\n        src=\"/static/d7691e7365c72db4745c34f216329360/dbb61/castlevania-debug-views.png\"\n        srcset=\"/static/d7691e7365c72db4745c34f216329360/19bd1/castlevania-debug-views.png 163w,\n/static/d7691e7365c72db4745c34f216329360/d3bcb/castlevania-debug-views.png 325w,\n/static/d7691e7365c72db4745c34f216329360/dbb61/castlevania-debug-views.png 650w,\n/static/d7691e7365c72db4745c34f216329360/6b691/castlevania-debug-views.png 975w,\n/static/d7691e7365c72db4745c34f216329360/751e3/castlevania-debug-views.png 1026w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n      />\n    </span>\n  </span>\n  \n  <figcaption class=\"gatsby-resp-image-figcaption\">Castlevania Debug Views</figcaption>\n  </figure>\n      </p>\n<p>Implementing these debug views also requires a solid understand of how the pattern tables,\nnametables, object attribute memory (OAM), attribute tables, and palettes work together, which makes\nit great warm up for actually implementing the PPU rendering pipeline.</p>\n<h2 id=\"final-thoughts\"><a href=\"#final-thoughts\" aria-label=\"final thoughts permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Final Thoughts</h2>\n<p>Writing my own NES emulator from scratch was a very rewarding process that did have some frustrating\nmoments. I think it is a great system to learn and dig into because of all the widely available\ndocumentation. It is also really amazing to see how developers were able to overcome limitations in\nhardware and still produce pretty amazing games.</p>","headings":[{"value":"Introduction","depth":2},{"value":"CPU","depth":2},{"value":"Cartridge and NROM","depth":2},{"value":"PPU","depth":2},{"value":"Mappers","depth":2},{"value":"APU","depth":2},{"value":"Compiling to WebAssembly","depth":2},{"value":"Recipe for Success","depth":2},{"value":"1. Have Patience","depth":3},{"value":"2. Write Automated Tests","depth":3},{"value":"3. Implement Debugging Infrastructure","depth":3},{"value":"Final Thoughts","depth":2}],"frontmatter":{"date_created":"2018-11-12T00:00:00.000Z","path":"/blog/writing-an-nes-emulator-with-rust-and-webassembly","tags":["Emulation","Programming","Rust","WebAssembly"],"title":"Writing an NES Emulator with Rust and WebAssembly"}}}]},"allPosts":{"edges":[{"node":{"frontmatter":{"tags":["Emulation","Programming","Rust","WebAssembly"],"path":"/blog/writing-an-nes-emulator-with-rust-and-webassembly","title":"Writing an NES Emulator with Rust and WebAssembly","date_created":"2018-11-12T00:00:00.000Z"}}},{"node":{"frontmatter":{"tags":["Web Development","Programming"],"path":"/blog/personal-website-redesign","title":"Personal Website Redesign","date_created":"2017-09-24T00:00:00.000Z"}}},{"node":{"frontmatter":{"tags":["Programming","Competition"],"path":"/blog/ecoo-round-1-analysis","title":"ECOO Round 1 Analysis","date_created":"2016-04-08T00:00:00.000Z"}}},{"node":{"frontmatter":{"tags":["Programming","Competition"],"path":"/blog/ccoqr-2016-analysis","title":"CCOQR 2016 Analysis","date_created":"2016-03-11T00:00:00.000Z"}}},{"node":{"frontmatter":{"tags":["Programming","Competition"],"path":"/blog/ccc-2016-analysis","title":"CCC 2016 Analysis","date_created":"2016-02-17T00:00:00.000Z"}}},{"node":{"frontmatter":{"tags":["Programming","Machine Learning"],"path":"/blog/machine-learning-notes","title":"Machine Learning Notes","date_created":"2016-02-16T00:00:00.000Z"}}},{"node":{"frontmatter":{"tags":["Competition","Hackathon","Programming","WebGL","Music","Physics"],"path":"/blog/uoft-hacks","title":"UofT Hacks","date_created":"2016-01-25T00:00:00.000Z"}}},{"node":{"frontmatter":{"tags":["Dynamic Programming","Programming"],"path":"/blog/divide-and-conquer-optimization","title":"Divide and Conquer Optimization","date_created":"2015-12-14T00:00:00.000Z"}}},{"node":{"frontmatter":{"tags":["Dynamic Programming","Programming"],"path":"/blog/knuths-optimization","title":"Knuth's Optimization","date_created":"2015-12-07T00:00:00.000Z"}}},{"node":{"frontmatter":{"tags":["Dynamic Programming","Programming"],"path":"/blog/convex-hull-trick","title":"Convex Hull Trick","date_created":"2015-11-30T00:00:00.000Z"}}},{"node":{"frontmatter":{"tags":["Competition","Hackathon","Programming","Machine learning"],"path":"/blog/hack-western","title":"Hack Western","date_created":"2015-11-29T00:00:00.000Z"}}},{"node":{"frontmatter":{"tags":["Competition","Math"],"path":"/blog/harvard-mit-math-tournament","title":"Harvard MIT Math Tournament","date_created":"2015-11-24T00:00:00.000Z"}}},{"node":{"frontmatter":{"tags":["Misc"],"path":"/blog/first-blog-post","title":"First Blog Post","date_created":"2015-11-23T00:00:00.000Z"}}}]}},"pageContext":{"page":1,"numOfPages":1,"skip":0,"limit":5,"pathPrefix":"/blog/tags/rust","tags":["Rust"]}}}